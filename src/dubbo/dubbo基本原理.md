#dubbo的基本原理

## 一.dubbo原理:
#### [1.dubbo框架设计](http://dubbo.apache.org/zh-cn/docs/dev/design.html)
    看官网的链接地址
    工作原理:
        dubbo 工作原理
        第一层：service 层，接口层，给服务提供者和消费者来实现的
        第二层：config 层，配置层，主要是对 dubbo 进行各种配置的
        第三层：proxy 层，服务代理层，无论是 consumer 还是 provider，dubbo 都会给你生成代理，代理之间进行网络通信
        第四层：registry 层，服务注册层，负责服务的注册与发现
        第五层：cluster 层，集群层，封装多个服务提供者的路由以及负载均衡，将多个实例组合成一个服务
        第六层：monitor 层，监控层，对 rpc 接口的调用次数和调用时间进行监控
        第七层：protocal 层，远程调用层，封装 rpc 调用
        第八层：exchange 层，信息交换层，封装请求响应模式，同步转异步
        第九层：transport 层，网络传输层，抽象 mina 和 netty 为统一接口
        第十层：serialize 层，数据序列化层
#### 2.dubbo-启动原理,加载配置信息
#### 3.dubbo-服务暴露
#### 4.dubbo-服务引用
#### 5.dubbo-服务调用

### 注册中心挂了可以继续通信吗？
可以，因为刚开始初始化的时候，消费者会将提供者的地址等信息**拉取到本地缓存**，所以注册中心挂了可以继续通信。

### dubbo 支持的序列化协议
dubbo 支持 hession、Java 二进制序列化、json、SOAP 文本序列化多种序列化协议。但是 hessian 是其默认的序列化协议。
**序列化**，就是把数据结构或者是一些对象，转换为二进制串的过程.
**反序列化**,是将在序列化过程中所生成的二进制串转换成数据结构或者对象的过程.

## dubbo 负载均衡策略和集群容错策略都有哪些？动态代理策略呢？
*问你这个问题的目的:就是看你对 dubbo 熟悉不熟悉：*
* dubbo 工作原理：服务注册、注册中心、消费者、代理通信、负载均衡；
* 网络通信、序列化：dubbo 协议、长连接、NIO、hessian 序列化协议；
* 负载均衡策略、集群容错策略、动态代理策略：dubbo 跑起来的时候一些功能是如何运转的？怎么做负载均衡？怎么做集群容错？怎么生成动态代理？
* dubbo SPI 机制：你了解不了解 dubbo 的 SPI 机制？如何基于 SPI 机制对 dubbo 进行扩展？

**负载均衡策略有一下几种:**
1. random loadbalance
    默认情况下，dubbo 是 random loadbalance ，即*随机调用*实现负载均衡，可以对 provider 不同实例设置不同的权重，会按照权重来负载均衡，权重越大分配流量越高，一般就用这个默认的就可以了。
2.roundrobin loadbalance
    这个的话默认就是均匀地将流量打到各个机器上去，但是如果各个机器的性能不一样，容易导致性能差的机器负载过高。所以此时需要调整权重，让性能差的机器承载权重小一些，流量少一些。
3.leastactive loadbalance
    这个就是自动感知一下，如果某个机器性能越差，那么接收的请求越少，越不活跃，此时就会给**不活跃的性能差的机器更少的请求**。
4.consistanthash loadbalance
    一致性 Hash 算法，相同参数的请求一定分发到一个 provider 上去，provider 挂掉的时候，会基于虚拟节点均匀分配剩余的流量，抖动不会太大。**如果你需要的不是随机负载均衡**，是要一类请求都到一个节点，那就走这个一致性 Hash 策略。
    
    
    
    
